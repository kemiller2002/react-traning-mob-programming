import { useQuery, UseQueryResult } from "react-query";
import { redaxios } from 'redaxios';

export class ConfigRegistry {
  category?: string;
  code?: string;
  description?: string;
  value?: Object;
}

export const useConfigRegistry = () => {
  const queryResult: UseQueryResult<ConfigRegistry[], unknown> = useQuery(["registry"], async (): Promise<ConfigRegistry[]> => {
    // TODO: async method that calls the API to return data

    const response = await fetch("https://localhost:5001/ConfigRegistryItem");
    return response.json();

    // return new Promise((resolve) => {
    //   setTimeout(() => {
    //     resolve(categories);
    //   }, 1000);
    // });
  });

  const returnValue = {
    categories: queryResult.data ?? [],
    isFetching: queryResult.isFetching,
  };

  return returnValue;
};
